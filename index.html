<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meet-Our-Team</title>
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <!-- bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- style.css -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="wrap">
      <section class="hero_section my-5">
        <div class="img_box">
          <img src="img/illustration.png" alt="" />
        </div>
      </section>
      <nav class="navbar navbar-expand-lg text-bg-primary rounded p-3">
        <div class="container-fluid">
          <a class="navbar-brand text-light font-weight-bold" href="#"
            >팀 이름</a
          >
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a
                  class="nav-link active text-light"
                  aria-current="page"
                  href="#"
                  >팀 소개</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link text-light" href="#">멤버 소개</a>
              </li>
              <li class="nav-item text-end">
                <a class="nav-link text-light" href="#">방명록</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <section class="team_section my-5">
        <div class="pricing-header p-3 pb-md-4 mx-auto text-center">
          <h1 class="display-4 fw-normal text-body-emphasis">팀 소개</h1>
          <p class="fs-5 text-body-secondary">
            우리팀은 예쁘고 귀엽고 깜찍하고 잘생기고 멋있습니다.
          </p>
        </div>
        <div class="row row-cols-1 row-cols-md-3 mb-3 text-center">
          <div class="col">
            <div class="card mb-4 rounded-3 shadow-sm">
              <div class="card-header py-3">
                <h4 class="my-0 fw-normal">우리팀의 특징 / 목표</h4>
              </div>
              <div class="card-body">
                <h1 class="card-title pricing-card-title">
                  끈기<small class="text-body-secondary fw-light">있음</small>
                </h1>
                <ul class="list-unstyled mt-3 mb-4">
                  <li>10 users included</li>
                  <li>2 GB of storage</li>
                  <li>Email support</li>
                  <li>Help center access</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card mb-4 rounded-3 shadow-sm">
              <div class="card-header py-3">
                <h4 class="my-0 fw-normal">우리 팀의 약속</h4>
              </div>
              <div class="card-body">
                <h1 class="card-title pricing-card-title">
                  끝까지<small class="text-body-secondary fw-light"
                    >해내자</small
                  >
                </h1>
                <ul class="list-unstyled mt-3 mb-4">
                  <li>20 users included</li>
                  <li>10 GB of storage</li>
                  <li>Priority email support</li>
                  <li>Help center access</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card mb-4 rounded-3 shadow-sm border-primary">
              <div class="card-header py-3 text-bg-primary border-primary">
                <h4 class="my-0 fw-normal">블로그 주소</h4>
              </div>
              <div class="card-body">
                <h1 class="card-title pricing-card-title">
                  명품<small class="text-body-secondary fw-light">주소</small>
                </h1>
                <ul class="list-unstyled mt-3 mb-4">
                  <li>30 users included</li>
                  <li>15 GB of storage</li>
                  <li>Phone and email support</li>
                  <li>Help center access</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="member_section my-5">
        <div class="pricing-header p-3 pb-md-4 mx-auto text-center">
          <h1 class="display-4 fw-normal text-body-emphasis">멤버 소개</h1>
          <p class="fs-5 text-body-secondary">
            우리팀 멤버들은 예쁘고 귀엽고 깜찍하고 잘생기고 멋있습니다.
          </p>
          <button type="button" class="btn btn-lg btn-outline-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo">멤버 추가하기</button>
        </div>
        <div id="cards" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
          <div class="col">
            <div class="card shadow-sm">
              <img
                class="bd-placeholder-img card-img-top"
                width="100%"
                height="225px"
                src="img/profile.jpg"
              >
              </svg>
              <div class="card-body">
                <p class="card-text">
                  안녕하세요 ! 고양이를 좋아하는 김땡떙 입니다.
                </p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card shadow-sm">
              <img
                class="bd-placeholder-img card-img-top"
                width="100%"
                height="225px"
                src="img/profile.jpg"
              >
              </svg>
              <div class="card-body">
                <p class="card-text">
                  안녕하세요 ! 강아지를 좋아하는 김땡떙 입니다.
                </p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card shadow-sm">
              <img
                class="bd-placeholder-img card-img-top"
                width="100%"
                height="225px"
                src="img/profile.jpg"
              >
              </svg>
              <div class="card-body">
                <p class="card-text">
                  안녕하세요 ! 고양이를 좋아하는 김땡떙 입니다.
                </p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card shadow-sm">
              <img
                class="bd-placeholder-img card-img-top"
                width="100%"
                height="225px"
                src="img/profile.jpg"
              >
              </svg>
              <div class="card-body">
                <p class="card-text">
                  안녕하세요 ! 그냥 김땡떙 입니다.
                </p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card shadow-sm">
              <img
                class="bd-placeholder-img card-img-top"
                width="100%"
                height="225px"
                src="img/profile.jpg"
              >
              </svg>
              <div class="card-body">
                <p class="card-text">
                  안녕하세요 ! 고양이를 좋아하는 김땡떙 입니다.
                </p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card shadow-sm">
              <img
                class="bd-placeholder-img card-img-top"
                width="100%"
                height="225px"
                src="img/profile.jpg"
              >
              </svg>
              <div class="card-body">
                <p class="card-text">
                  ...
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">New message</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="mb-3">
                <label for="recipient-name" class="col-form-label">프로필 이미지:</label>
                <input type="text" id="profileImg" class="form-control" id="recipient-name" required>
              </div>
              <div class="mb-3">
                <label for="recipient-name" class="col-form-label">한줄 소개:</label>
                <input type="text" id="intro" class="form-control" id="recipient-name" required>
              </div>
              <div class="mb-3">
                <label for="recipient-name" class="col-form-label">MBTI:</label>
                <input type="text" id="mbti" class="form-control" id="recipient-name" required>
              </div>
              <div class="mb-3">
                <label for="message-text" class="col-form-label">자신의 장점:</label>
                <textarea class="form-control" id="merit" required></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" id="closeBtn" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
            <button type="button" id="saveBtn" class="btn btn-primary">저장하기</button>
          </div>
        </div>
      </div>
    </div>

    <!-- bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script type="module">
      // Firebase SDK 라이브러리 가져오기
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
      import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
      import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

      // Firebase 구성 정보 설정
      const firebaseConfig = {
        apiKey: "AIzaSyBkQICiWSjg5HOoTbRABf_3vKGWiRuXjXk",
        authDomain: "sparta-99127.firebaseapp.com",
        projectId: "sparta-99127",
        storageBucket: "sparta-99127.firebasestorage.app",
        messagingSenderId: "21636541090",
        appId: "1:21636541090:web:53ae33565c0f1bed2745fb",
        measurementId: "G-J0J83TFTXV"
      };
      
      // Firebase 인스턴스 초기화
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // 멤버 카드 create
      $("#saveBtn").click(async function () {
        let profileImg = $('#profileImg').val();
        let intro = $('#intro').val();
        let mbti = $('#mbti').val();
        let merit = $('#merit').val();

        let doc = {
            'profileImg': profileImg,
            'intro': intro,
            'mbti': mbti,
            'merit': merit
        };

        if(profileImg === "" || intro === "" || mbti === "" || merit === "") {
          alert('빈칸을 모두 채워주세요!');
          return
        }

        await addDoc(collection(db, "members"), doc);
        alert('저장완료!');
        window.location.reload();
      })

      $("#closeBtn").click(async function(){
        window.location.reload();
      })

      // 멤버 카드 read
      let docs = await getDocs(collection(db, "members"));
      docs.forEach((doc) => {
        let row = doc.data();

        let profileImg = row['profileImg'];
        let intro = row['intro'];
        let mbti = row['mbti'];
        let merit = row['merit'];

        let temp_html = `
          <div class="col">
            <div class="card shadow-sm">
              <img
                class="bd-placeholder-img card-img-top"
                width="100%"
                height="225px"
                src="${profileImg}"
              >
              </svg>
              <div class="card-body">
                <p class="card-text">
                  ${intro}
                </p>
              </div>
            </div>
          </div>`
        $('#cards').append(temp_html);
      })
    </script>
  </body>
</html>
